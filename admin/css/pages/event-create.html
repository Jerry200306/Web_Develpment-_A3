<div class="card">
    <div class="card-header">
        <h2 class="card-title">Create New Event</h2>
        <button class="btn btn-secondary" ng-click="cancelCreate()">
            ‚Üê Back to Events
        </button>
    </div>
    
    <div ng-if="loading" class="loading">
        <div class="spinner"></div>
        <p>Loading form...</p>
    </div>
    
    <div ng-if="!loading">
        <form name="eventForm" ng-submit="createEvent()" novalidate>
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" for="event-name">Event Name *</label>
                    <input type="text" class="form-control" id="event-name" name="name" 
                           ng-model="newEvent.name" required
                           ng-class="{'input-error': eventForm.name.$invalid && eventForm.$submitted}">
                    <div class="validation-error" ng-show="eventForm.name.$invalid && eventForm.$submitted">
                        Event name is required
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="event-category">Category *</label>
                    <select class="form-control" id="event-category" name="category_id" 
                            ng-model="newEvent.category_id" required
                            ng-class="{'input-error': eventForm.category_id.$invalid && eventForm.$submitted}">
                        <option value="">Select a category</option>
                        <option ng-repeat="category in categories" value="{{ category.id }}">
                            {{ category.name }}
                        </option>
                    </select>
                    <div class="validation-error" ng-show="eventForm.category_id.$invalid && eventForm.$submitted">
                        Category is required
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label" for="event-description">Short Description *</label>
                <textarea class="form-control" id="event-description" name="description" 
                          rows="2" ng-model="newEvent.description" required
                          ng-class="{'input-error': eventForm.description.$invalid && eventForm.$submitted}"></textarea>
                <div class="validation-error" ng-show="eventForm.description.$invalid && eventForm.$submitted">
                    Description is required
                </div>
            </div>

            <div class="form-group">
                <label class="form-label" for="event-full-description">Full Description</label>
                <textarea class="form-control" id="event-full-description" name="full_description" 
                          rows="4" ng-model="newEvent.full_description"></textarea>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" for="event-date">Date *</label>
                    <input type="date" class="form-control" id="event-date" name="date" 
                           ng-model="newEvent.date" required
                           pattern="\d{4}-\d{2}-\d{2}"
                           ng-class="{'input-error': eventForm.date.$invalid && eventForm.$submitted}">
                    <div class="validation-error" ng-show="eventForm.date.$invalid && eventForm.$submitted">
                        Date is required
                    </div>
                    <small class="form-hint">Format: YYYY-MM-DD (e.g., 2025-10-09)</small>
                </div>
                <div class="form-group">
                    <label class="form-label" for="event-time">Time</label>
                    <input type="time" class="form-control" id="event-time" name="time" 
                           ng-model="newEvent.time"
                           placeholder="HH:MM">
                    <small class="form-hint">Format: HH:MM (e.g., 14:30)</small>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" for="event-location">Location *</label>
                    <input type="text" class="form-control" id="event-location" name="location" 
                           ng-model="newEvent.location" required
                           ng-class="{'input-error': eventForm.location.$invalid && eventForm.$submitted}">
                    <div class="validation-error" ng-show="eventForm.location.$invalid && eventForm.$submitted">
                        Location is required
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="event-venue">Venue Name</label>
                    <input type="text" class="form-control" id="event-venue" name="venue_name" 
                           ng-model="newEvent.venue_name">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" for="event-ticket-price">Ticket Price ($)</label>
                    <input type="number" class="form-control" id="event-ticket-price" name="ticket_price" 
                           min="0" step="0.01" ng-model="newEvent.ticket_price">
                </div>
                <div class="form-group">
                    <label class="form-label" for="event-goal-amount">Goal Amount ($)</label>
                    <input type="number" class="form-control" id="event-goal-amount" name="goal_amount" 
                           min="0" step="0.01" ng-model="newEvent.goal_amount">
                </div>
            </div>

            <div class="form-group">
                <label class="form-label" for="event-image">Image URL</label>
                <input type="url" class="form-control" id="event-image" name="image_url" 
                       ng-model="newEvent.image_url" placeholder="https://example.com/image.jpg">
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-success" ng-disabled="submitting">
                    <span ng-if="!submitting">Create Event</span>
                    <span ng-if="submitting">Creating Event...</span>
                </button>
                <button type="button" class="btn btn-secondary" ng-click="cancelCreate()" ng-disabled="submitting">
                    Cancel
                </button>
            </div>
        </form>
    </div>
</div>